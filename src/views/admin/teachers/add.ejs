<%- include('../layouts/admin', { title: 'Add Teacher', style: '', script: '',
content: `
<div class="container mt-4">
  <h2>Add New Teacher</h2>
  <form
    action="/admin/teachers/add"
    method="POST"
    class="needs-validation"
    enctype="multipart/form-data"
    novalidate
  >
    <div class="row">
      ${typeof error !== 'undefined' ? `
      <div class="alert alert-danger" role="alert">${error}</div>
      ` : ''}
      <div class="col-md-6 mb-3">
        <label for="firstName" class="form-label">First Name</label>
        <input
          type="text"
          class="form-control"
          id="firstName"
          name="firstName"
          value="${typeof formData !== 'undefined' ? formData.firstName : ''}"
          required
        />
      </div>
      <div class="col-md-6 mb-3">
        <label for="lastName" class="form-label">Last Name</label>
        <input
          type="text"
          class="form-control"
          id="lastName"
          name="lastName"
          value="${typeof formData !== 'undefined' ? formData.lastName : ''}"
          required
        />
      </div>
    </div>

    <div class="row">
      <div class="col-md-6 mb-3">
        <label for="email" class="form-label">Email</label>
        <input
          type="email"
          class="form-control"
          id="email"
          name="email"
          value="${typeof formData !== 'undefined' ? formData.email : ''}"
          required
        />
      </div>
      <div class="col-md-6 mb-3">
        <label for="phone" class="form-label">Phone</label>
        <input
          type="tel"
          class="form-control"
          id="phone"
          name="phone"
          value="${typeof formData !== 'undefined' ? formData.phone : ''}"
        />
      </div>
    </div>

    <div class="row">
      <div class="col-md-6 mb-3">
        <label for="qualification" class="form-label">Qualification</label>
        <input
          type="text"
          class="form-control"
          id="qualification"
          name="qualification"
          value="${typeof formData !== 'undefined' ? formData.qualification : ''}"
          required
        />
      </div>
      <div class="col-md-6 mb-3">
        <label for="experience" class="form-label">Experience</label>
        <input
          type="text"
          class="form-control"
          id="experience"
          name="experience"
          value="${typeof formData !== 'undefined' ? formData.experience : ''}"
          required
        />
      </div>
    </div>

    <div class="mb-3">
      <label for="specialization" class="form-label">Specialization</label>
      <input
        type="text"
        class="form-control"
        id="specialization"
        name="specialization"
        value="${typeof formData !== 'undefined' ? formData.specialization : ''}"
      />
    </div>

    <div class="mb-3">
      <label for="bio" class="form-label">Biography</label>
      <textarea class="form-control" id="bio" name="bio" rows="3" required>
${typeof formData !== 'undefined' ? formData.bio : ''}</textarea
      >
    </div>

    <div class="mb-3">
      <label for="achievements" class="form-label"
        >Achievements (One per line)</label
      >
      <textarea
        class="form-control"
        id="achievements"
        name="achievements"
        rows="3"
      >
${typeof formData !== 'undefined' && formData.achievements ? formData.achievements.join('\n') : ''}</textarea
      >
    </div>

    <div class="mb-3">
      <label for="image" class="form-label">Teacher Image</label>
      <input
        type="file"
        class="form-control"
        id="image"
        name="image"
        accept="image/*"
        onchange="previewImage(this)"
        required
      />
      <div class="mt-2">
        <img
          id="imagePreview"
          src="#"
          alt="Preview"
          style="max-width: 200px; display: none"
          class="img-thumbnail"
        />
      </div>
    </div>

    <script>
      function previewImage(input) {
        const preview = document.getElementById("imagePreview");
        if (input.files && input.files[0]) {
          const reader = new FileReader();
          reader.onload = function (e) {
            preview.src = e.target.result;
            preview.style.display = "block";
          };
          reader.readAsDataURL(input.files[0]);
        }
      }
    </script>

    <button type="submit" class="btn btn-primary">Add Teacher</button>
    <a href="/admin/teachers" class="btn btn-secondary">Cancel</a>
  </form>
</div>

<script>
  // Form validation
  document
    .querySelector(".needs-validation")
    .addEventListener("submit", function (event) {
      if (!this.checkValidity()) {
        event.preventDefault();
        event.stopPropagation();
      }
      this.classList.add("was-validated");
    });
</script>
`}) %>
